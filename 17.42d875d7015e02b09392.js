(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"0JFd":function(e,n,t){"use strict";t.r(n);var i=t("mrSG"),o=t("CcnG"),r=t("Ip0R"),s=t("ZYCi"),a=t("gIcY"),l=[{title:"Gestion commerciale",icon:"nb-shuffle",children:[{title:"Outils marketing",link:"/admin/gestion-commerciale/outils-marketing"}]},{title:"Market place",icon:"nb-location",children:[{title:"Ventes",link:"/admin/market-place/ventes"},{title:"Autres",link:"/admin/market-place/autres"}]},{title:"Bourse des financements",icon:"nb-lightbulb",children:[{title:"Art\xe9facts",link:"/admin/bourse-financement/artefacts"},{title:"Financements",link:"/admin/bourse-financement/financements"},{title:"Autres",link:"/admin/bourse-financement/autres"}]},{title:"R\xe9seau Microcap",icon:"nb-person",children:[{title:"Partenaires",link:"/admin/social-network/partenaires"},{title:"Membres",link:"/admin/social-network/membres"},{title:"R\xe9alisations",link:"/admin/social-network/realisations"}]},{title:"Gestionnaire des composants externes",icon:"nb-grid-a",children:[{title:"Ateliers",link:"/admin/gestion-composants-externes/ateliers"},{title:"Ressources mutualis\xe9es",link:"/admin/gestion-composants-externes/ressources-mutualisees"},{title:"Ev\xe8nements",link:"/admin/gestion-composants-externes/evenements"},{title:"Autres",link:"/admin/gestion-composants-externes/autres"}]},{title:"Exploitation",icon:"nb-checkmark-circle",children:[{title:"Actifs",link:"/admin/exploitation/actifs"},{title:"Bourse de financement",link:"/admin/exploitation/bourse-financement"},{title:"Bourse d'opportunit\xe9s",link:"/admin/exploitation/bourse-opportunite"},{title:"Profil",link:"/admin/exploitation/profil"},{title:"Ressources",link:"/admin/exploitation/ressources"}]},{title:"Syst\xe8me",icon:"nb-gear",children:[{title:"Maintenance",link:"/admin/systeme/maintenance"},{title:"Configuration",link:"/admin/systeme/configuration"}]}],c=t("TtU4"),u=t("E49E"),m=t("t/Na"),d=t("AytR"),p={headers:new m.d({"Content-Type":"application/json"})},h=function(){function e(e){this.http=e,this.get_token_url=d.a.KEYCLOAK_URL+"/realms/master/protocol/openid-connect/token",this.role_url=d.a.KEYCLOAK_URL+"/microcap/clients/microcap_frontend/roles",this.group_group_type_url=d.a.serverEndpoint+"auth/sn/user/group_types",this.group_detail_url=d.a.serverEndpoint+"auth/sn/user/groupdetail",this.group_type_detail_url=d.a.serverEndpoint+"auth/sn/user/group_type_details",this.group_state_url=d.a.serverEndpoint+"auth/sn/user/groups/status/",this.group_person_url=d.a.serverEndpoint+"auth/sn/user/groups/validator",this.get_plateform_code_url=d.a.serverEndpoint+"auth/sn/user/platform_members/membership_code/type/",this.join_group_url=d.a.serverEndpoint+"auth/sn/user/platform_members/becomeMember"}return e.prototype.addRole=function(e){return console.log("The new role is:",e),this.http.post(this.role_url,e,p).toPromise()},e.prototype.getToken=function(){return this.http.post(this.get_token_url,p).toPromise()},e=i.c([Object(o.C)({providedIn:"root"}),i.f("design:paramtypes",[m.b])],e)}(),g=t("jcq5"),b=t("qfBg"),f=t("nEDP"),k=function(){function e(e,n,t,i,o,r,s){this.sidebarService=e,this.userService=n,this.token=t,this.router=i,this.formBuilder=o,this.roleManagementService=r,this.groupService=s,this.items=[{title:"Mon profil"},{title:"D\xe9connexion"}],this.menu=l}return e.prototype.toggle=function(){return this.sidebarService.toggle(!0),!1},e.prototype.ngOnInit=function(){var e=this;this.profile=f.a.getUser(),this.userService.getAdminBoard().subscribe(function(n){e.board=n},function(n){e.errorMessage=n.status+": "+JSON.parse(n.error).message}),this.profile=f.a.getUser(),this.info={username:"..."},this.info.username=this.profile.username,this.initForm()},e.prototype.initForm=function(){this.roleForm=this.formBuilder.group({id:"microcap_frontend",realm:"microcap",description:"Un test",name:"tetu"})},e.prototype.logout=function(){f.a.logout()},e.prototype.addRole=function(){return i.b(this,void 0,void 0,function(){return i.e(this,function(e){return[2]})})},e.prototype.getToken=function(){return i.b(this,void 0,void 0,function(){return i.e(this,function(e){switch(e.label){case 0:return[4,this.roleManagementService.getToken().then(function(e){return console.log(e),!0}).catch(function(e){return console.log("Problem to get token "+JSON.stringify(e)),alert("Problem to get token "+JSON.stringify(e)),!1})];case 1:return e.sent(),[2]}})})},e=i.c([Object(o.n)({selector:"app-administration",template:t("VCdI"),styles:[t("TXEh")]}),i.f("design:paramtypes",[c.v,b.a,g.a,s.c,a.b,h,u.a])],e)}(),x=[{path:"",component:k,children:[{path:"social-network",loadChildren:"./social-network/social-network.module#SocialNetworkModule"},{path:"systeme",loadChildren:"./systeme/systeme.module#SystemeModule"},{path:"bourse-financement",loadChildren:"./bourse-financements/bourse-financements.module#BourseFinancementsModule"},{path:"exploitation",loadChildren:"./exploitation/exploitation.module#ExploitationModule"},{path:"gestion-commerciale",loadChildren:"./gestion-commerciale/gestion-commerciale.module#GestionCommercialeModule"},{path:"gestion-composants-externes",loadChildren:"./gestion-composants-externes/gestion-composants-externes.module#GestionComposantsExternesModule"},{path:"market-place",loadChildren:"./market-place/market-place.module#MarketPlaceModule"}]}],y=function(){function e(){}return e=i.c([Object(o.K)({imports:[s.d.forChild(x)],exports:[s.d]})],e)}(),v=t("wUrw");t.d(n,"AdministrationModule",function(){return _});var _=function(){function e(){}return e=i.c([Object(o.K)({declarations:[k],imports:[r.b,a.c,y,r.b,s.d,c.n,c.u,r.b,c.f,c.x,c.a,c.o,c.p,c.y,c.b,c.m,c.g,c.r,c.t,c.i.forRoot(),c.q,c.h,c.j.forRoot(),c.E.forChild(),c.s,c.D,c.e,c.c,c.w],providers:[c.v,c.F,v.a]})],e)}()},TXEh:function(e,n){e.exports=".right-menu {\n  float: left; }\n\na {\n  text-decoration: none;\n  cursor: pointer; }\n\n.logo {\n  margin-right: 3em; }\n\n.menu-item {\n  padding-right: 2em;\n  color: #333; }\n\n.menu-item:hover {\n  color: #000;\n  font-weight: bold; }\n\n/**\n * Header\n *---------------*/\n\n.admin-header {\n  width: 100%; }\n\n.admin-header, .admin-header .logo-container, .admin-header .expansion {\n    display: -webkit-box;\n    display: flex;\n    -webkit-box-align: center;\n            align-items: center; }\n\n.admin-header ::ng-deep nb-user .user-name {\n    text-transform: capitalize; }\n\n.admin-header .flex-grow {\n    -webkit-box-flex: 1;\n            flex-grow: 1; }\n"},VCdI:function(e,n){e.exports='<nb-layout>\n  <nb-layout-header fixed>\n  \n   <div class="admin-header">\n\n      <div class="logo-container mr-2">\n        <nb-actions size="medium" class="sidebar-toggle mr-2">\n          <nb-action icon="nb-menu" class="px-0"\n           (click)="toggleSidebar()">\n          </nb-action>\n        </nb-actions>\n\n        <a [routerLink]="[\'/home\']">\n          <img src="../../assets/images/logomicrocap_1.png" \n            width="100" height="50" alt="" class="logo">\n        </a>\n      </div>\n\n      <div class="flex-grow"></div>\n      \n    <div class="expansion">\n    <nb-actions size="medium" class="d-flex align-center mx-4">\n    \n    \t  <nb-action icon="nb-person"\n           nbTooltip="Ajouter un r\xf4le" nbTooltipPlacement="bottom"\n           (click)="addRole()">\n          </nb-action>\n    \t  <nb-action icon="nb-power"\n           nbTooltip="Log out" nbTooltipPlacement="bottom"\n           (click)="logout()">\n          </nb-action>\n    </nb-actions>\n      <nb-user size="large" [name]="info.username" \n      [title]="info.authorities" [nbContextMenu]="items" picture="../../assets/images/alan.png">\n      </nb-user>\n    </div>\n    </div>\n  </nb-layout-header>\n\n  <nb-sidebar>\n    <nb-menu [items]="menu" autoCollapse=true></nb-menu>\n  </nb-sidebar>\n\n  <nb-layout-column>\n    <router-outlet></router-outlet>\n  </nb-layout-column>\n  <nb-layout-footer>&copy; Microcap</nb-layout-footer>\n</nb-layout>\n'}}]);