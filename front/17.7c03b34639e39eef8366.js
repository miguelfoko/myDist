(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"/WsJ":function(n,t){n.exports="<router-outlet></router-outlet> \n"},"1UJ+":function(n,t,e){"use strict";e.r(t);var r=e("mrSG"),o=e("CcnG"),a=e("Ip0R"),i=e("gIcY"),s=e("TtU4"),c=e("ZYCi"),d=function(){function n(){}return n.prototype.ngOnInit=function(){},n=r.c([Object(o.n)({selector:"app-bourse-financements-pfm",template:e("/WsJ"),styles:[e("pLvb")]}),r.f("design:paramtypes",[])],n)}(),l=e("ZtdT"),u=e("7NUU"),p=e("qfBg"),f=function(){function n(n,t,e){this.userService=n,this.windowService=t,this.activeFundsService=e,this.activeFunds=[],this.pagingNonUserActiveFunds={currentPage:0,totalPages:0,defaultPageSize:10}}return n.prototype.ngOnInit=function(){var n=this;this.fetchUser();var t=setInterval(function(){n.user&&(n.fetchActiveFunds(),clearInterval(t))},300);this.bootEvaIcons()},n.prototype.bootEvaIcons=function(){var n=!1,t=0,e=setInterval(function(){document.querySelector("[data-eva]")?(l.replace(),n=!0):(n||t>7)&&clearInterval(e),t++},700);document.querySelector(".tabset").addEventListener("click",this.bootEvaIcons)},n.prototype.fetchUser=function(){return r.b(this,void 0,void 0,function(){var n=this;return r.e(this,function(t){switch(t.label){case 0:return[4,this.userService.getCurrentUser().then(function(t){n.user=t}).catch(function(n){console.error(n)})];case 1:return t.sent(),[2]}})})},n.prototype.fetchActiveFunds=function(){return r.b(this,void 0,void 0,function(){var n=this;return r.e(this,function(t){switch(t.label){case 0:return[4,this.activeFundsService.fetchAllActiveFunds().then(function(t){n.activeFunds=t.content,n.pagingNonUserActiveFunds.totalPages=Math.ceil(n.nonUserActiveFunds().length/n.pagingNonUserActiveFunds.defaultPageSize)}).catch(function(n){console.error(n)})];case 1:return t.sent(),[2]}})})},n.prototype.userHasActiveFunds=function(){if(this.activeFunds)for(var n=0,t=this.activeFunds;n<t.length;n++){if(t[n].utilisateur.idUtilisateur===this.user.idUtilisateur)return!0}return!1},n.prototype.userActiveFunds=function(){var n=this;return this.activeFunds.filter(function(t){return t.utilisateur.idUtilisateur===n.user.idUtilisateur})},n.prototype.nonUserActiveFunds=function(){var n=this;return this.activeFunds.filter(function(t){return t.utilisateur.idUtilisateur!==n.user.idUtilisateur})},n.prototype.loadNonUserActiveFundsPage=function(n){this.pagingNonUserActiveFunds.currentPage=n},n.prototype.refreshActiveFunds=function(){this.loadNonUserActiveFundsPage(0),this.fetchActiveFunds()},n.prototype.openAddActiveFundWindow=function(){},n.prototype.formatDate=function(n){return new Date(n).toLocaleString()},n.prototype.arrayRange=function(n){return Array.from(Array(n).keys())},n.prototype.currentUserId=function(){return this.user.idUtilisateur},n=r.c([Object(o.n)({selector:"app-artefacts",template:e("CQ0i"),styles:[e("iRsu")]}),r.f("design:paramtypes",[p.a,s.F,u.a])],n)}(),b=function(){function n(){}return n.prototype.ngOnInit=function(){},n=r.c([Object(o.n)({selector:"app-autres",template:e("azzb"),styles:[e("BHxV")]}),r.f("design:paramtypes",[])],n)}(),m=function(){return function(n,t,e,r,o,a,i){void 0===o&&(o=null),this.idTransaction=o,this.amount=n,this.currency=t,this.date=e,this.token=r,this.utilisateur=a,this.compte=i}}(),v=function(){function n(n,t){this.formBuilder=n,this.userService=t,this.isSend=!1,this.message="",this.status="success",this.isSendBG=!1,this.messageBG="",this.statusBG="success"}return n.prototype.ngOnInit=function(){this.initForm(),this.initFormBG(),this.getUser(),this.loadStripe()},n.prototype.initForm=function(){this.depositForm=this.formBuilder.group({cardNumber:["",i.g.required],expMonth:["",i.g.required],expYear:["",i.g.required],cvc:["",i.g.required],amount:["",i.g.required]})},n.prototype.initFormBG=function(){this.bgForm=this.formBuilder.group({numberBG:["",i.g.required],cost:[""]})},Object.defineProperty(n.prototype,"form",{get:function(){return this.depositForm.controls},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"formBG",{get:function(){return this.bgForm.controls},enumerable:!0,configurable:!0}),n.prototype.onClose=function(){this.isSend=!1,this.isSendBG=!1},n.prototype.getUser=function(){return r.b(this,void 0,void 0,function(){var n=this;return r.e(this,function(t){switch(t.label){case 0:return[4,this.userService.getCurrentUser().then(function(t){return n.user=t,n.getAccount(),!0}).catch(function(n){return alert("Problem to get User from database "),!1})];case 1:return t.sent(),[2]}})})},n.prototype.getAccount=function(){return r.b(this,void 0,void 0,function(){var n=this;return r.e(this,function(t){switch(t.label){case 0:return[4,this.userService.getCurrentAccount(this.user.idUtilisateur).then(function(t){return n.compte=t,!0}).catch(function(n){return alert("Problem to get compte from database "),!1})];case 1:return t.sent(),[2]}})})},n.prototype.onChange=function(n){this.formBG.cost.setValue(2e3*parseInt(this.formBG.numberBG.value+0)+" Fcfa")},n.prototype.onSubmitBG=function(){var n=this,t=parseInt(this.formBG.numberBG.value+0);if(t<1)return this.isSendBG=!0,this.statusBG="danger",void(this.messageBG="Le nombre de BG doit etre superieure a 0");if(2e3*parseInt(this.formBG.numberBG.value+0)>this.compte.solde)return this.isSendBG=!0,this.statusBG="danger",void(this.messageBG="Le solde de votre compte est insuffisant pour cette operation");var e=new m(2e3*parseInt(this.formBG.numberBG.value+0),"XAF",this.dateToTimestamp(new Date),t+"",null,this.user,this.compte);this.userService.achatBG(e).subscribe(function(e){n.isSendBG=!0,n.statusBG="success",n.messageBG="L'achat de "+t+" BG s'est deroule avec succes",n.compte=e},function(t){n.isSendBG=!0,n.statusBG="danger",n.messageBG="Une erreur s'est produite, veuillez reesayer"})},n.prototype.onSubmit=function(){var n=this;if(window.Stripe)return this.depositForm.invalid?(this.isSend=!0,this.status="danger",void(this.message="Veuillez bien remplir le formulaire")):void(window.Stripe?window.Stripe.card.createToken({number:this.form.cardNumber.value,exp_month:this.form.expMonth.value,exp_year:this.form.expYear.value,cvc:this.form.cvc.value},function(t,e){if(200===t){var r=new m(n.form.amount.value,"EUR",n.dateToTimestamp(new Date),e.id,null,n.user,n.compte);n.userService.rechargeCompte(r).subscribe(function(t){n.isSend=!0,n.status="success",n.message="La recharge s'est deroulee avec succes",n.compte=t},function(t){n.isSend=!0,n.status="danger",n.message="Une erreur s'est produite, veuillez reesayer"})}else n.isSend=!0,n.status="danger",n.message=e.error.message}):alert("Oops! Stripe did not initialize properly."));alert("Oops! Stripe did not initialize properly.")},n.prototype.loadStripe=function(){if(!window.document.getElementById("stripe-custom-form-script")){var n=window.document.createElement("script");n.id="stripe-custom-form-script",n.type="text/javascript",n.src="https://js.stripe.com/v2/",n.onload=function(){window.Stripe.setPublishableKey("pk_test_zdiMBJWM4BEHKUooRvv0Hsb100Py1VniNT")},window.document.body.appendChild(n)}},n.prototype.dateToTimestamp=function(n){return n.getTime()},n.prototype.formatDate=function(n){return new Date(n).toLocaleString()},n=r.c([Object(o.n)({selector:"app-recharge",template:e("KFO1"),styles:[e("B1Ho")]}),r.f("design:paramtypes",[i.b,p.a])],n)}(),h=[{path:"",component:d,children:[{path:"artefacts",component:f},{path:"autres",component:b},{path:"recharge-compte",component:v},{path:"achat-bg",component:b}]}],g=function(){function n(){}return n=r.c([Object(o.K)({imports:[c.d.forChild(h)],exports:[c.d]})],n)}(),y=e("xkgV");e.d(t,"BourseFinancementsPfmModule",function(){return w});var w=function(){function n(){}return n=r.c([Object(o.K)({declarations:[d,f,b,v],imports:[a.b,s.y,s.g,s.b,s.p,s.D,s.f,s.e,s.c,s.m,s.o,s.C,s.h,s.w,y.a,i.f,g]})],n)}()},B1Ho:function(n,t){n.exports="form {\n  padding-top: 2rem;\n  padding-bottom: 1rem;\n  max-width: 700px;\n  margin: auto; }\n  form .field {\n    margin-bottom: 2rem; }\n  form .field label {\n      font-size: 90%;\n      display: block; }\n  form .field .control, form .field .control input {\n      width: 100%; }\n  form .field nb-select ::ng-deep [nbButton] {\n      height: 46px;\n      border-color: #dadfe6;\n      text-transform: capitalize; }\n  .modalField {\n  margin-bottom: 30px; }\n  .consult-wrapper .options .filter {\n  font-size: 90%;\n  border-radius: 5px;\n  border: 1px solid #ebeff5; }\n  .consult-wrapper .options .filter, .consult-wrapper .options .filter * {\n    display: -webkit-box;\n    display: flex;\n    -webkit-box-align: center;\n            align-items: center; }\n  .consult-wrapper .options .filter nb-checkbox ::ng-deep label {\n    padding: 0; }\n  .consult-wrapper .options .filter nb-checkbox ::ng-deep .customised-control-description {\n    display: none; }\n  .consult-wrapper .data {\n  font-size: 85%; }\n  .consult-wrapper .data tr:hover {\n    background-color: #f8fafd; }\n  .consult-wrapper .data thead tr:hover {\n    background-color: transparent; }\n  .consult-wrapper .data th, .consult-wrapper .data td {\n    vertical-align: middle; }\n  .consult-wrapper .data .pagination-wrapper {\n    max-width: 100%; }\n  .consult-wrapper .data .pagination-wrapper .page-item .page-link:hover {\n      background-color: #f8fafd; }\n  .consult-wrapper .data .pagination-wrapper .page-item.active .page-link {\n      border-color: #3dcc6d;\n      background-color: #3dcc6d; }\n  .consult-wrapper .options .btn-secondary, .consult-wrapper .data .actions .btn-secondary {\n  cursor: pointer; }\n  .consult-wrapper .options .btn-secondary:hover, .consult-wrapper .data .actions .btn-secondary:hover {\n    color: #ffffff;\n    background-color: #40dc7e; }\n  .bottom {\n  margin-bottom: 20px; }\n"},BHxV:function(n,t){n.exports=""},CQ0i:function(n,t){n.exports='<div class="row">\n  <div class="col">\n    <nb-card>\n      <nb-card-body>        \n        <nb-tabset>\n\n          \x3c!-- Fonds --\x3e\n          <nb-tab tabTitle="Fonds" tabIcon="nb-bar-chart">\n            <div class="consult-wrapper mt-4 px-4">\n            \n              <div class="user-active-funds mb-4 mt-4" *ngIf="userHasActiveFunds()">\n                <div class="options d-flex align-center mb-4">\n\n                  <div class="title py-2">\n                    Fonds actifs affili\xe9s\n                    <button nbButton size="xsmall" shape="round" status="success" class="font-weight-bold ml-2"\n                     (click)="openAddActiveFundWindow()">\n                      <i data-eva="plus-circle" data-eva-fill="#fff" class="mr-1" data-eva-height="15" data-eva-width="15"></i>\n                      Cr\xe9er un fonds actif\n                    </button>\n                  </div>\n\n                  <div class="ml-auto">\n                    <button nbButton class="btn-secondary" size="xsmall" shape="round"\n                      (click)="refreshActiveFunds()">\n                      Rafra\xeechir\n                    </button>\n                  </div>               \n                  \n                </div>\n\n                <div class="data table-responsive">\n                  <table class="table table-hover table-bordered">\n                    \n                    <thead>\n                      <tr>\n                        <th scope="col">#</th>\n                        <th scope="col">Nom</th>\n                        <th scope="col">Date de cr\xe9ation</th>\n                        <th scope="col">Actions</th>\n                      </tr>\n                    </thead>\n\n                    <tbody >\n                      <ng-container *ngFor="let el of userActiveFunds()">\n\n                        <tr>\n                          <th scope="row">{{ el.idFondsActif }}</th>\n                          <td>{{ el.nom }}</td>\n                          <td>{{ formatDate(el.dateCreation) }}</td>\n\n                          <td class="actions text-center">\n                            <a nbButton size="xsmall" shape="round" status="danger" class="">\n                              <i data-eva="trash" data-eva-fill="#fff" class="mr-1" data-eva-height="15" data-eva-width="15"></i>\n                              Supprimer\n                            </a>\n                          </td>\n                        </tr>\n                        \n                      </ng-container>\n                    </tbody>\n                  </table>\n\n                </div>\n              </div>\n\n              <div class="active-funds mb-4">\n                  <div class="options d-flex align-center mb-4">\n  \n                    <div class="title py-2">\n                      Fonds actifs disponibles\n                    </div>\n  \n                    <div class="ml-auto">\n                      <button nbButton class="btn-secondary" size="xsmall" shape="round"\n                        (click)="refreshActiveFunds()">\n                        Rafra\xeechir\n                      </button>\n                    </div>               \n                    \n                  </div>\n  \n                  <div class="data table-responsive">\n                    <table class="table table-hover table-bordered">\n                      \n                      <thead>\n                        <tr>\n                          <th scope="col">#</th>\n                          <th scope="col">Nom</th>\n                          <th scope="col">Cr\xe9ateur</th>\n                          <th scope="col">Date de cr\xe9ation</th>\n                          <th scope="col">Actions</th>\n                        </tr>\n                      </thead>\n  \n                      <tbody >\n                        <ng-container *ngFor="let el of nonUserActiveFunds() | paginate: { itemsPerPage: pagingNonUserActiveFunds.defaultPageSize, currentPage: pagingNonUserActiveFunds.currentPage + 1 }">\n  \n                          <tr>\n                            <th scope="row">{{ el.idFondsActif }}</th>\n                            <td>{{ el.nom }}</td>\n                            <td>{{ el.utilisateur.prenomUtilisateur }} {{ el.utilisateur.nomUtilisateur }}</td>\n                            <td>{{ formatDate(el.dateCreation) }}</td>\n  \n                            <td class="actions text-center">\n                              <a nbButton size="xsmall" shape="round" class="btn-secondary">\n                                Souscrire\n                              </a>\n                            </td>\n                          </tr>\n                          \n                        </ng-container>\n                      </tbody>\n                    </table>\n\n                    <nav class="pagination-wrapper d-flex justify-content-around py-3">\n                      <ul class="pagination mb-0 pl-0">\n                        <li class="page-item" [ngClass]="{disabled: pagingNonUserActiveFunds.currentPage <= 0}">\n                          <a class="page-link" (click)="loadNonUserActiveFundsPage(pagingNonUserActiveFunds.currentPage - 1)" aria-label="Previous">\n                            <span aria-hidden="true">&laquo;</span>\n                            <span class="sr-only">Previous</span>\n                          </a>\n                        </li>\n    \n                        <li *ngFor="let page of arrayRange(pagingNonUserActiveFunds.totalPages)"\n                          class="page-item" [ngClass]="{active: pagingNonUserActiveFunds.currentPage == page}">\n                          <a class="page-link" (click)="loadNonUserActiveFundsPage(page)">{{ page + 1 }}</a>\n                        </li>\n    \n                        <li class="page-item" [ngClass]="{disabled: pagingNonUserActiveFunds.currentPage >= pagingNonUserActiveFunds.totalPages - 1}">\n                          <a class="page-link" (click)="loadNonUserActiveFundsPage(pagingNonUserActiveFunds.currentPage + 1)" aria-label="Next">\n                            <span aria-hidden="true">&raquo;</span>\n                            <span class="sr-only">Next</span>\n                          </a>\n                        </li>\n                      </ul>\n                    </nav>\n  \n                  </div>\n                </div>\n\n            </div>\n\n            <div class="modals">\n              \x3c!-- <app-add-active-fund #addActiveFundModal></app-add-active-fund> --\x3e\n            </div>\n          </nb-tab>\n\n        </nb-tabset>\n      </nb-card-body>\n    </nb-card>\n  </div>\n</div>\n      '},KFO1:function(n,t){n.exports='<div class="row">\n  <div class="col">\n    <nb-card>\n      <nb-card-body>        \n        <nb-tabset fullWidth>\n\n          \x3c!-- Cr\xe9er une communaut\xe9 --\x3e\n          <nb-tab tabTitle="Recharge de compte" tabIcon="nb-loop">\n            <form [formGroup]="depositForm" (ngSubmit)="onSubmit()">\n              \n              <div class="row">\n                <nb-alert class="bottom col-md-12" status="{{ status }}" *ngIf="isSend" fullWidth closable (close)="onClose()">\n                  {{ message }}\n                </nb-alert>\n                <div class="field col-md-12">\n                  <label>Numero de la carte </label>\n                  <div class="control">\n                    <input type="text" formControlName="cardNumber" nbInput>\n                  </div>\n                </div>\n                <div class="field col-md-12">\n                  <label>Mois d\'expiration </label>\n                  <div class="control">\n                    <input type="text" formControlName="expMonth" nbInput>\n                  </div>\n                </div>\n                <div class="field col-md-12">\n                  <label>Annee d\'expiration </label>\n                  <div class="control">\n                    <input type="text" formControlName="expYear" nbInput>\n                  </div>\n                </div>\n                <div class="field col-md-12">\n                  <label>Code de validation </label>\n                  <div class="control">\n                    <input type="text" formControlName="cvc" nbInput>\n                  </div>\n                </div>\n                <div class="field col-md-12">\n                  <label>Montant de la recharge (euro) </label>\n                  <div class="control">\n                    <input type="text" formControlName="amount" nbInput>\n                  </div>\n                </div>\n              </div>\n              <button status="success" type="submit" fullWidth nbButton>\n                Recharger\n              </button>\n\n            </form>\n          </nb-tab>\n\n          <nb-tab tabTitle="Achat des BGs" tabIcon="nb-lightbulb">\n            <form [formGroup]="bgForm" (ngSubmit)="onSubmitBG()">\n              \n              <div class="row">\n                <nb-alert class="bottom col-md-12" status="{{ statusBG }}" *ngIf="isSendBG" fullWidth closable (close)="onClose()">\n                  {{ messageBG }}\n                </nb-alert>\n                <div class="field col-md-12">\n                  <label>Le solde de votre compte est de: {{ compte.solde }} Fcfa</label>\n                </div>\n                <div class="field col-md-12">\n                  <label>Nombre de BGs \xe0 acheter </label>\n                  <div class="control">\n                    <input type="number" formControlName="numberBG" nbInput (keyup)="onChange($event)" min="1">\n                  </div>\n                </div>\n                <div class="field col-md-12">\n                  <label>Cout de l\'op\xe9ration </label>\n                  <div class="control">\n                    <input type="text" disabled formControlName="cost" nbInput>\n                  </div>\n                </div>\n              </div>\n              <button status="success" type="submit" fullWidth nbButton>\n                Acheter\n              </button>\n\n            </form>\n          </nb-tab>\n\n        </nb-tabset>\n      </nb-card-body>\n    </nb-card>\n  </div>\n</div>\n    '},azzb:function(n,t){n.exports="<p>\n Autres  (comming soon !)\n</p>\n"},iRsu:function(n,t){n.exports=".consult-wrapper .options .filter {\n  border-radius: 5px;\n  border: 1px solid #ebeff5; }\n  .consult-wrapper .options .filter, .consult-wrapper .options .filter * {\n    display: -webkit-box;\n    display: flex;\n    -webkit-box-align: center;\n            align-items: center; }\n  .consult-wrapper .options .title {\n  font-weight: 500;\n  font-size: 1.5rem; }\n  .consult-wrapper .data {\n  font-size: 85%; }\n  .consult-wrapper .data tr:hover {\n    background-color: #f8fafd; }\n  .consult-wrapper .data thead tr:hover {\n    background-color: transparent; }\n  .consult-wrapper .data th, .consult-wrapper .data td {\n    vertical-align: middle; }\n  .consult-wrapper .data .pagination-wrapper {\n    max-width: 100%; }\n  .consult-wrapper .data .pagination-wrapper .page-item .page-link:hover {\n      background-color: #f8fafd; }\n  .consult-wrapper .data .pagination-wrapper .page-item.active .page-link {\n      border-color: #3dcc6d;\n      background-color: #3dcc6d; }\n  .consult-wrapper .options .btn-secondary, .consult-wrapper .data .actions .btn-secondary {\n  cursor: pointer; }\n  .consult-wrapper .options .btn-secondary:hover, .consult-wrapper .data .actions .btn-secondary:hover {\n    color: #ffffff;\n    background-color: #40dc7e; }\n"},pLvb:function(n,t){n.exports=""}}]);