(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"0JFd":function(e,t,n){"use strict";n.r(t);var i=n("mrSG"),o=n("CcnG"),r=n("Ip0R"),s=n("ZYCi"),a=n("gIcY"),l=[{title:"Gestion commerciale",icon:"nb-shuffle",children:[{title:"Outils marketing",link:"/admin/gestion-commerciale/outils-marketing"}]},{title:"Market place",icon:"nb-location",children:[{title:"Ventes",link:"/admin/market-place/ventes"},{title:"Autres",link:"/admin/market-place/autres"}]},{title:"Bourse des financements",icon:"nb-lightbulb",children:[{title:"Art\xe9facts",link:"/admin/bourse-financement/artefacts"},{title:"Financements",link:"/admin/bourse-financement/financements"},{title:"Autres",link:"/admin/bourse-financement/autres"}]},{title:"R\xe9seau Microcap",icon:"nb-person",children:[{title:"Communaut\xe9s",link:"/admin/social-network/communautes"},{title:"Partenaires",link:"/admin/social-network/partenaires"},{title:"Membres",link:"/admin/social-network/membres"},{title:"R\xe9alisations",link:"/admin/social-network/realisations"}]},{title:"Gestionnaire des composants externes",icon:"nb-grid-a",children:[{title:"Ateliers",link:"/admin/gestion-composants-externes/ateliers"},{title:"Ressources mutualis\xe9es",link:"/admin/gestion-composants-externes/ressources-mutualisees"},{title:"Ev\xe8nements",link:"/admin/gestion-composants-externes/evenements"},{title:"Autres",link:"/admin/gestion-composants-externes/autres"}]},{title:"Exploitation",icon:"nb-checkmark-circle",children:[{title:"Actifs",link:"/admin/exploitation/actifs"},{title:"Bourse de financement",link:"/admin/exploitation/bourse-financement"},{title:"Bourse d'opportunit\xe9s",link:"/admin/exploitation/bourse-opportunite"},{title:"Profil",link:"/admin/exploitation/profil"},{title:"Ressources",link:"/admin/exploitation/ressources"}]},{title:"Syst\xe8me",icon:"nb-gear",children:[{title:"Maintenance",link:"/admin/systeme/maintenance"},{title:"Configuration",link:"/admin/systeme/configuration"}]}],c=function(){return function(e){return Object.assign(this,e)}}(),u=n("TtU4"),p=n("E49E"),d=n("t/Na"),m=n("AytR"),h={headers:new d.d({"Content-Type":"application/json"})},g=function(){function e(e){this.http=e,this.role_url=m.a.serverEndpoint+"/sn/role",this.group_group_type_url=m.a.serverEndpoint+"auth/sn/user/group_types",this.group_detail_url=m.a.serverEndpoint+"auth/sn/user/groupdetail",this.group_type_detail_url=m.a.serverEndpoint+"auth/sn/user/group_type_details",this.group_state_url=m.a.serverEndpoint+"auth/sn/user/groups/status/",this.group_person_url=m.a.serverEndpoint+"auth/sn/user/groups/validator",this.get_plateform_code_url=m.a.serverEndpoint+"auth/sn/user/platform_members/membership_code/type/",this.join_group_url=m.a.serverEndpoint+"auth/sn/user/platform_members/becomeMember"}return e.prototype.addRole=function(e){return console.log("The new role is:",e),this.http.post(this.role_url,e,h).toPromise()},e=i.c([Object(o.C)({providedIn:"root"}),i.f("design:paramtypes",[d.b])],e)}(),f=n("jcq5"),b=n("qfBg"),y=n("nEDP"),k=function(){function e(e,t,n,i,o,r,s){this.sidebarService=e,this.userService=t,this.token=n,this.router=i,this.formBuilder=o,this.roleManagementService=r,this.groupService=s,this.items=[{title:"Mon profil"},{title:"D\xe9connexion"}],this.menu=l}return e.prototype.toggle=function(){return this.sidebarService.toggle(!0),!1},e.prototype.ngOnInit=function(){var e=this;this.profile=y.a.getUser(),this.userService.getAdminBoard().subscribe(function(t){e.board=t},function(t){e.errorMessage=t.status+": "+JSON.parse(t.error).message}),this.profile=y.a.getUser(),this.info={username:"..."},this.info.username=this.profile.loginUtilisateur,this.initForm()},e.prototype.initForm=function(){this.roleForm=this.formBuilder.group({id:"",realm:"microcap",description:"Un test",name:"tetu"})},e.prototype.logout=function(){y.a.logout()},e.prototype.addRole=function(){return i.b(this,void 0,void 0,function(){var e;return i.e(this,function(t){switch(t.label){case 0:return e=new c(this.roleForm.value),[4,this.roleManagementService.addRole(e).then(function(e){return console.log("cr\xe9ation r\xe9ussie dans le controleur"),!0}).catch(function(e){return console.log("Problem to create new Role "+JSON.stringify(e)),alert("Problem to create new Role "+JSON.stringify(e)),!1})];case 1:return t.sent(),[2]}})})},e=i.c([Object(o.n)({selector:"app-administration",template:n("VCdI"),styles:[n("TXEh")]}),i.f("design:paramtypes",[u.v,b.a,f.a,s.c,a.b,g,p.a])],e)}(),v=[{path:"",component:k,children:[{path:"social-network",loadChildren:"./social-network/social-network.module#SocialNetworkModule"},{path:"systeme",loadChildren:"./systeme/systeme.module#SystemeModule"},{path:"bourse-financement",loadChildren:"./bourse-financements/bourse-financements.module#BourseFinancementsModule"},{path:"exploitation",loadChildren:"./exploitation/exploitation.module#ExploitationModule"},{path:"gestion-commerciale",loadChildren:"./gestion-commerciale/gestion-commerciale.module#GestionCommercialeModule"},{path:"gestion-composants-externes",loadChildren:"./gestion-composants-externes/gestion-composants-externes.module#GestionComposantsExternesModule"},{path:"market-place",loadChildren:"./market-place/market-place.module#MarketPlaceModule"}]}],w=function(){function e(){}return e=i.c([Object(o.K)({imports:[s.d.forChild(v)],exports:[s.d]})],e)}(),x=n("wUrw");n.d(t,"AdministrationModule",function(){return _});var _=function(){function e(){}return e=i.c([Object(o.K)({declarations:[k],imports:[r.b,a.c,w,r.b,s.d,u.n,u.u,r.b,u.f,u.x,u.a,u.o,u.p,u.y,u.b,u.m,u.g,u.r,u.t,u.i.forRoot(),u.q,u.h,u.j.forRoot(),u.E.forChild(),u.s,u.D,u.e,u.c,u.w],providers:[u.v,u.F,x.a]})],e)}()},TXEh:function(e,t){e.exports=".right-menu {\n  float: left; }\n\na {\n  text-decoration: none;\n  cursor: pointer; }\n\n.logo {\n  margin-right: 3em; }\n\n.menu-item {\n  padding-right: 2em;\n  color: #333; }\n\n.menu-item:hover {\n  color: #000;\n  font-weight: bold; }\n\n/**\n * Header\n *---------------*/\n\n.admin-header {\n  width: 100%; }\n\n.admin-header, .admin-header .logo-container, .admin-header .expansion {\n    display: -webkit-box;\n    display: flex;\n    -webkit-box-align: center;\n            align-items: center; }\n\n.admin-header ::ng-deep nb-user .user-name {\n    text-transform: capitalize; }\n\n.admin-header .flex-grow {\n    -webkit-box-flex: 1;\n            flex-grow: 1; }\n\n/**\n * Main viewport\n */\n\nnb-layout-column ::ng-deep .tabset {\n  font-size: 1.1rem; }\n\nnb-layout-column ::ng-deep .tabset .tab.active a {\n    font-weight: 400; }\n\n/**\n * Fixes\n *---------------*/\n\nnb-layout-header.fixed {\n  top: 0; }\n\nnb-sidebar ::ng-deep .main-container-fixed {\n  top: 4.75rem; }\n\nnb-sidebar ::ng-deep .menu-icon {\n  margin-right: 0.25rem !important; }\n"},VCdI:function(e,t){e.exports='<nb-layout>\n  <nb-layout-header fixed>\n  \n   <div class="admin-header">\n\n      <div class="logo-container mr-2">\n        <nb-actions size="medium" class="sidebar-toggle mr-2">\n          <nb-action icon="nb-menu" class="px-0"\n           (click)="toggle()">\n          </nb-action>\n        </nb-actions>\n\n        <a [routerLink]="[\'/pfm\']">\n          <img src="../../assets/images/logomicrocap_1.png" \n            width="100" height="50" alt="" class="logo">\n        </a>\n      </div>\n\n      <div class="flex-grow"></div>\n      \n    <div class="expansion">\n    <nb-actions size="medium" class="d-flex align-center mx-4">\n    \n    \t  <a [routerLink]="[\'/home\']">\n          <img src="../../assets/images/logomicrocap_1.png" \n            width="100" height="50" alt="" class="logo">\n        </a>\n        \n    \t  <nb-action icon="nb-person"\n           nbTooltip="Ajouter un r\xf4le" nbTooltipPlacement="bottom"\n           (click)="addRole()">\n          </nb-action>\n    \t  <nb-action icon="nb-power"\n           nbTooltip="Log out" nbTooltipPlacement="bottom"\n           (click)="logout()">\n          </nb-action>\n    </nb-actions>\n      <nb-user size="large" [name]="info.username" \n      [title]="info.authorities" [nbContextMenu]="items" picture="../../assets/images/alan.png">\n      </nb-user>\n    </div>\n    </div>\n  </nb-layout-header>\n\n  <nb-sidebar>\n    <nb-menu [items]="menu" autoCollapse=true></nb-menu>\n  </nb-sidebar>\n\n  <nb-layout-column>\n    <router-outlet></router-outlet>\n  </nb-layout-column>\n  <nb-layout-footer>&copy; Microcap</nb-layout-footer>\n</nb-layout>\n'},qfBg:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("mrSG"),o=n("CcnG"),r=n("t/Na"),s=n("AytR"),a=n("nEDP"),l={headers:new r.d({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"})},c=function(){function e(e){this.http=e,this.url=s.a.serverEndpoint+"/funding/utilisateurs",this.keycloack=s.a.KEYCLOAK_URL+"/realms/microcap/protocol/openid-connect/token",this.pfmUrl=s.a.serverEndpoint+"api/test/pfm",this.nwmUrl=s.a.serverEndpoint+"api/test/nwm",this.adminUrl=s.a.serverEndpoint+"api/test/admin",this.urlRecharge=s.a.serverEndpoint+"/funding/mouvements",this.urlAchat=s.a.serverEndpoint+"/funding/actifs",this.urlBGDispo=s.a.serverEndpoint+"/funding/actifs/",this.keycloakAuth=new Keycloak("assets/keycloak.json")}return e.prototype.getPFMBoard=function(){return this.http.get(this.pfmUrl,{responseType:"text"})},e.prototype.getNWMBoard=function(){return this.http.get(this.nwmUrl,{responseType:"text"})},e.prototype.getAdminBoard=function(){return this.http.get(this.adminUrl,{responseType:"text"})},e.prototype.addUser=function(e){return this.http.post(this.url,e,l)},e.prototype.updateUser=function(e){return console.log(e),this.http.put(this.url,e,l).toPromise()},e.prototype.getUser=function(e){return this.http.get(this.url+"/login?value="+e,l).toPromise()},e.prototype.getUsers=function(){return this.http.get(this.url,l).toPromise()},e.prototype.getCurrentUser=function(){var e=a.a.getUser();if(!e)return Promise.reject("No such current user.");var t=e.loginUtilisateur;return this.getUser(t)},e.prototype.getCurrentAccount=function(e){return this.http.get(this.url+"/"+e+"/compte",l).toPromise()},e.prototype.rechargeCompte=function(e){return this.http.post(this.urlRecharge,e,l)},e.prototype.achatBG=function(e){return this.http.post(this.urlAchat,e,l)},e.prototype.bgDisponible=function(e){return this.http.get(this.urlAchat+"/"+e.idCompte+"/available",l).toPromise()},e.prototype.libererBG=function(){return this.http.get(this.url+"/liberer-bg",l).toPromise()},e.prototype.getToken=function(e,t){var n=new r.d;n=n.append("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");var i="username="+e+"&password="+t+"&grant_type=password&client_id=microcap_frontend&client_secret=3b5f757d-685f-40be-89af-98174b9d6a6d";return this.http.post(this.keycloack,i,{headers:n}).toPromise()},e.prototype.refreshToken=function(){var e=new r.d;e=e.append("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");var t="refresh_token="+a.a.auth.authz.refreshToken+"&grant_type=password&client_id=microcap_frontend&client_secret=3b5f757d-685f-40be-89af-98174b9d6a6d";return this.http.post(this.keycloack,t,{headers:e}).toPromise()},e=i.c([Object(o.C)({providedIn:"root"}),i.f("design:paramtypes",[r.b])],e)}()}}]);