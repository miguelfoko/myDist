(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"09hJ":function(e,n,t){"use strict";t.r(n);var i=t("mrSG"),o=t("CcnG"),a=t("Ip0R"),r=t("ZYCi"),s=t("nEDP"),l=function(){function e(e){this.keycloakService=e}return e.prototype.ngOnInit=function(){},e.ctorParameters=function(){return[{type:s.a}]},e=i.c([Object(o.n)({selector:"app-authentification",template:t("Qx6u"),styles:[t("yvBa")]}),i.f("design:paramtypes",[s.a])],e)}(),u=t("mfNC"),c=t("gIcY"),d=t("AytR"),p=t("qfBg"),m=function(){function e(e,n,t,i,o){this.userService=e,this.formBuilder=n,this.route=t,this.router=i,this.contractService=o,this.isIn=!1,this.isSend=!1,this.message="",this.status="success",this.loading=!1,this.fromRegistration=0}return e.prototype.ngOnInit=function(){return i.b(this,void 0,void 0,function(){var e,n=this;return i.e(this,function(t){switch(t.label){case 0:return this.existsCurrentUser("current_user")?(console.log("We are here"),this.router.navigate(["/pfm"])):s.a.isLogged()&&(console.log("We are here login"),this.router.navigate(["/home"])),e=this,[4,s.a.getUser()];case 1:return e.profile=t.sent(),this.route.params.subscribe(function(e){n.fromRegistration=+e.registration}),this.fromRegistration&&(this.isSend=!0,this.status="success",this.message="Enregistrement reussie, connectez-vous pour continuer !"),[4,this.userService.getCurrentUser().then(function(e){n.profile=e,n.isIn=!0}).catch(function(e){})];case 2:return t.sent(),this.initForm(),[2]}})})},e.prototype.initForm=function(){this.loginForm=this.formBuilder.group({login:["",c.i.required],password:["",c.i.required]})},Object.defineProperty(e.prototype,"form",{get:function(){return this.loginForm.controls},enumerable:!0,configurable:!0}),e.prototype.existsCurrentUser=function(e){return!!localStorage.getItem(e)&&(localStorage.removeItem("current_user"),!0)},e.prototype.getUser=function(){return i.b(this,void 0,void 0,function(){var e=this;return i.e(this,function(n){switch(n.label){case 0:return[4,this.userService.getCurrentUser().then(function(n){e.isIn=!0,e.currentUserId=n.idUtilisateur,e.profile=n,s.a.setFullUser(n),e.router.navigate(["/pfm"])}).catch(function(e){s.a.logout("/404"),console.log(e)})];case 1:return n.sent(),[2]}})})},e.prototype.onClose=function(){this.isSend=!1},e.prototype.onLogin=function(){return i.b(this,void 0,void 0,function(){var e=this;return i.e(this,function(n){switch(n.label){case 0:return this.loading=!0,this.form.login.value&&this.form.password.value?[4,this.userService.getToken(this.form.login.value,this.form.password.value).then(function(n){s.a.auth.registerUrl=s.a.auth.authz.createRegisterUrl(),s.a.auth.logoutUrl=d.a.KEYCLOAK_URL+"/realms/"+d.a.KEYCLOAK_REALM+"/protocol/openid-connect/logout?redirect_uri="+d.a.baseUrl,s.a.auth.loggedIn=!0,s.a.setLogin(),s.a.setUser(e.form.login.value),s.a.setAccessToken(n.access_token,n.expires_in);var t=(new Date).getTime();t=(t+(new Date).getTime())/2,e.setToken(n.access_token,n.refresh_token,n.id_token,n.session_state,t),e.isSend=!0,e.status="success",e.message="Connexion reussie",s.a.setRole(s.a.auth.authz.realmAccess.roles),console.log(s.a.auth),e.getUser()}).catch(function(n){e.isSend=!0,e.status="danger",e.message=n.error.error_description,e.loading=!1})]:(this.isSend=!0,this.status="danger",this.message="Le login et le mot de passe sont requis",this.loading=!1,[2]);case 1:return n.sent(),[2]}})})},e.prototype.logout=function(){s.a.logout()},e.prototype.setToken=function(e,n,t,i,o){if(n?(s.a.auth.authz.refreshToken=n,s.a.auth.authz.refreshTokenParsed=this.decodeToken(n)):(delete s.a.auth.authz.refreshToken,delete s.a.auth.authz.refreshTokenParsed),t?(s.a.auth.authz.idToken=t,s.a.auth.authz.idTokenParsed=this.decodeToken(t)):(delete s.a.auth.authz.idToken,delete s.a.auth.authz.idTokenParsed),e){if(s.a.auth.authz.token=e,s.a.auth.authz.tokenParsed=this.decodeToken(e),s.a.auth.authz.sessionId=i,s.a.auth.authz.authenticated=!0,s.a.auth.authz.subject=this.decodeToken(e).sub,s.a.auth.authz.realmAccess=this.decodeToken(e).realm_access,s.a.auth.authz.resourceAccess=this.decodeToken(e).resource_access,o&&(s.a.auth.authz.timeSkew=Math.floor(o/1e3)-this.decodeToken(e).iat),null!=s.a.auth.authz.timeSkew&&s.a.auth.authz.onTokenExpired){var a=1e3*(this.decodeToken(e).exp-(new Date).getTime()/1e3+s.a.auth.authz.timeSkew);console.info("[KEYCLOAK] Token expires in "+Math.round(a/1e3)+" s"),a<=0?s.a.auth.authz.timeSkew.onTokenExpired():s.a.auth.authz.timeSkew.tokenTimeoutHandle=setTimeout(s.a.auth.authz.timeSkew.onTokenExpired,a)}return s.a.auth.authz.timeSkew}return delete s.a.auth.authz.timeSkew.token,delete s.a.auth.authz.timeSkew.tokenParsed,delete s.a.auth.authz.timeSkew.subject,delete s.a.auth.authz.timeSkew.realmAccess,delete s.a.auth.authz.timeSkew.resourceAccess,s.a.auth.authz.timeSkew.authenticated=!1,s.a.auth.authz.timeSkew},e.prototype.decodeToken=function(e){switch((e=(e=(e=e.split(".")[1]).replace("/-/g","+")).replace("/_/g","/")).length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Invalid token"}return e=(e=(e+"===").slice(0,e.length+e.length%4)).replace(/-/g,"+").replace(/_/g,"/"),e=decodeURIComponent(escape(atob(e))),e=JSON.parse(e)},e.ctorParameters=function(){return[{type:p.a},{type:c.b},{type:r.a},{type:r.c},{type:u.a}]},e=i.c([Object(o.n)({selector:"app-login",template:t("T8iF"),styles:[t("2Ql/")]}),i.f("design:paramtypes",[p.a,c.b,r.a,r.c,u.a])],e)}(),h=t("Tj/N"),g=t("i9ZP"),f=t("LRBj"),b=t("eQmz"),v=t("wUrw"),y=t("h2xV"),S=t("t/Na"),x=(new S.e({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}),function(){function e(e){this.http=e,this.url="https://restcountries.eu/rest/v2/all?fields=name;callingCodes",this.urlUserCountry="https://ipapi.co/json/"}return e.prototype.fetchCountries=function(e){return this.http.get(this.url).toPromise()},e.prototype.fetchUserCountry=function(){return this.http.get(this.urlUserCountry).toPromise()},e.ctorParameters=function(){return[{type:S.b}]},e=i.c([Object(o.D)({providedIn:"root"}),i.f("design:paramtypes",[S.b])],e)}()),k=function(){function e(e,n,t,i,o,a,r,s){this._ngZone=e,this.router=n,this.authService=t,this.formBuilder=i,this.codeValueService=o,this.userService=a,this.phoneService=r,this.contractService=s,this.telephoneTmp="",this.countries=[],this.isClicked=!1,this.person={},this.existingAdmin={},this.isSignedUp=!1,this.isSignUpFailed=!1,this.errorMessage="",this.organisation={},this.loadinPersongFlag=!1,this.loadingCheckExistingPersonFlag=!1,this.loadinOrganisationgFlag=!1,this.errorFlag=!1,this.isIn=!1,this.isSend=!1,this.message="",this.status="success",this.loading=!1,this.personFoundInBd=!1,this.personNotFoundInBd=!1,this.statusPhoneNumber="danger"}return e.prototype.ngOnInit=function(){return i.b(this,void 0,void 0,function(){var e,n=this;return i.e(this,function(t){switch(t.label){case 0:return s.a.isLogged()&&this.router.navigate(["/home"]),this.codeValueService.getIdentityTypeNew().subscribe(function(e){n.typePieceIdentites=e}),e=this,[4,s.a.getUser()];case 1:return e.profile=t.sent(),[4,this.userService.getCurrentUser().then(function(e){n.profile=e,n.isIn=!0}).catch(function(e){})];case 2:return t.sent(),this.initForm(),this.getAdminToken(),[2]}})})},e.prototype.initCallingCode=function(){return i.b(this,void 0,void 0,function(){var e=this;return i.e(this,function(n){switch(n.label){case 0:return[4,this.phoneService.fetchUserCountry().then(function(n){e.telephoneTmp=n.country_calling_code,e.initForm()}).catch(function(e){console.log(e)})];case 1:return n.sent(),[4,this.phoneService.fetchCountries(this.token).then(function(n){e.countries=n,console.log(e.countries)}).catch(function(e){console.log(e)})];case 2:return n.sent(),[2]}})})},e.prototype.setCallingCode=function(e){this.telephoneTmp="+"+e.target.value,this.registerForm.value.telephone=this.telephoneTmp,console.log(this.registerForm.value.telephone)},e.prototype.initForm=function(){this.registerForm=this.formBuilder.group({firstName:["",c.i.required],lastName:["",c.i.required],email:["",c.i.required,c.i.email],telephone:[this.telephoneTmp,c.i.required],password:["",c.i.required],passwordConfirm:["",c.i.required],personResidence:["",c.i.required],personNationalite:["",c.i.required],personNumeroIdentite:["",c.i.required],personPieceIdentite:["",c.i.required],personDebutValidite:["",c.i.required],personFinValidite:["",c.i.required],personDateNaissance:["",c.i.required],personAcceptContract:["",c.i.required]}),this.initFormulairePersonPhysique(),this.iniFormulairetPersonMorale(),this.profile=s.a.getUser()},e.prototype.initFormulairePersonPhysique=function(){this.personFirstForm=this.formBuilder.group({personFirstname:["",[c.i.required]],personLastname:["",[c.i.required]],personEmail:["",[c.i.required,c.i.email]],personUsername:["",[c.i.required]]}),this.personSecondForm=this.formBuilder.group({personResidence:[""],personNationalite:[""],personPieceIdentite:[""],personNumeroIdentite:[""],personDebutValidite:[""],personFinValidite:[""],personDateNaissance:[""],personAcceptContract:["",[c.i.required]]})},e.prototype.isValidPhonenumber=function(e){return/^\d{7,}$/.test(e.replace(/[\s()+\-\.]|ext/gi,""))},e.prototype.checkPhoneNumber=function(e){this.isValidPhonenumber(this.registerForm.value.telephone)?this.statusPhoneNumber="success":this.statusPhoneNumber="danger"},e.prototype.nextStepper=function(){this.isClicked=!0},e.prototype.canStep=function(){return this.form.firstName.value&&this.form.lastName.value&&this.form.email.value&&this.form.password.value&&this.form.passwordConfirm.value&&this.isValidPhonenumber(this.registerForm.value.telephone)?this.form.email.value.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?this.form.password.value!==this.form.passwordConfirm.value?(this.status="danger",this.message="Les mots de passe ne sont pas identiques !",!1):(this.isClicked=!1,!0):(this.status="danger",this.message="Cette adresse email est invalide !",!1):(this.status="danger",this.message="Tout les champs sont requis !",!1)},Object.defineProperty(e.prototype,"form",{get:function(){return this.registerForm.controls},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getMoralForm",{get:function(){return this.moralForm.controls},enumerable:!0,configurable:!0}),e.prototype.iniFormulairetPersonMorale=function(){this.organisationFirstForm=this.formBuilder.group({raisonSociale:["",[c.i.required]],nomCommercial:["",[c.i.required]],typeOrganisation:["",[c.i.required]]}),this.personExistForm=this.formBuilder.group({personExist:[!0,[]]})},e.prototype.getUser=function(){return i.b(this,void 0,void 0,function(){var e=this;return i.e(this,function(n){switch(n.label){case 0:return[4,this.userService.getCurrentUser().then(function(n){e.isIn=!0,e.currentUserId=n.idUtilisateur,e.profile=n,s.a.setFullUser(n),e.router.navigate(["/pfm"])}).catch(function(e){alert("Problem to get User")})];case 1:return n.sent(),this.organisationSecondForm=this.formBuilder.group({organisationEmail:["",[c.i.required,c.i.email]],organisationUsername:["",[c.i.required]],organisationPassword:["",[c.i.required]],organisationPasswordConfirmation:["",[c.i.required]]},{validator:Object(y.a)("organisationPassword","organisationPasswordConfirmation")}),this.organisationThirdForm=this.formBuilder.group({implantation:[""],paysImmatriculation:[""],immatriculation:[""],numeroImmatriculation:["",[c.i.required]],dateImmatriculation:[""],organisationAcceptContract:["",[c.i.required]]}),[2]}})})},e.prototype.getAdminToken=function(){return i.b(this,void 0,void 0,function(){var e=this;return i.e(this,function(n){switch(n.label){case 0:return[4,this.userService.getToken(d.a.KEYCLOAK_ADMIN_LOGIN,d.a.KEYCLOAK_ADMIN_PASSWORD).then(function(n){e.token=n.access_token,s.a.setAccessToken(n.access_token,18e3),e.codeValueService.getIdentityTypeNew2(e.token).then(function(n){e.typePieceIdentites=n}).catch(function(e){console.log(e)}),e.initCallingCode()}).catch(function(e){console.log(e)})];case 1:return n.sent(),[2]}})})},e.prototype.enrollOrganisation=function(){var e=this;this.loadinOrganisationgFlag=!0,this.personMoralDetails=[new f.a("Implantation","ox",this.organisationThirdForm.value.implantation,""),new f.a("Pays d'immatriculation","ox",this.organisationThirdForm.value.paysImmatriculation,""),new f.a("type d'imatriculation","ox",this.organisationThirdForm.value.immatriculation,""),new f.a("Num\xe9ro d'immatriculation","ox",this.organisationThirdForm.value.numeroImmatriculation,""),new f.a("D\xe9but d'immatriculation","ox",this.organisationThirdForm.value.dateImmatriculation,"")],this.signupInfoMoral=new b.a(this.organisationFirstForm.value.raisonSociale,this.organisationFirstForm.value.nomCommercial,this.organisationFirstForm.value.typeOrganisation,this.organisationSecondForm.value.organisationUsername,this.organisationSecondForm.value.organisationPassword,this.organisationSecondForm.value.organisationEmail,this.organisationThirdForm.value.numeroImmatriculation),this.signupInfoMoral.setDetails(this.personMoralDetails.slice()),this.authService.signUpMoral(this.signupInfoMoral).subscribe(function(n){e.loadinOrganisationgFlag=!1,e.router.navigate(["/auth/login"])},function(n){e.loadinOrganisationgFlag=!1})},e.prototype.onClose=function(){this.isSend=!1,this.isClicked=!1},e.prototype.enrollOrganisationWithExistantPfm=function(){return i.b(this,void 0,void 0,function(){return i.e(this,function(e){return this.loadinOrganisationgFlag=!0,this.personMoralDetails=[new f.a("Implantation","ox",this.organisationThirdForm.value.implantation,""),new f.a("Pays d'immatriculation","ox",this.organisationThirdForm.value.paysImmatriculation,""),new f.a("type d'imatriculation","ox",this.organisationThirdForm.value.immatriculation,""),new f.a("Num\xe9ro d'immatriculation","ox",this.organisationThirdForm.value.numeroImmatriculation,""),new f.a("D\xe9but d'immatriculation","ox",this.organisationThirdForm.value.dateImmatriculation,"")],this.signupInfoMoral=new b.a(this.organisationFirstForm.value.raisonSociale,this.organisationFirstForm.value.nomCommercial,this.organisationFirstForm.value.typeOrganisation,this.person.username,this.person.password,this.person.email,this.organisationThirdForm.value.numeroImmatriculation),this.signupInfoMoral.setDetails(this.personMoralDetails.slice()),console.log("*********************************************"),console.log(this.signupInfoMoral),console.log("*********************************************"),[2]})})},e.prototype.onRegister=function(){return i.b(this,void 0,void 0,function(){var e=this;return i.e(this,function(n){switch(n.label){case 0:return this.registerForm.invalid?(this.isSend=!0,this.status="danger",this.message="Le formulaire n'a pas \xe9t\xe9 rempli correctement",this.loading=!1,[2]):this.form.personDateNaissance.value<this.form.personDebutValidite.value&&this.form.personDebutValidite.value<this.form.personFinValidite.value?this.form.personAcceptContract.value?this.form.password.value!==this.form.passwordConfirm.value?(this.isSend=!0,this.status="danger",this.message="Les 2 mots de passe doivent etre identiques",this.loading=!1,[2]):[4,this.userService.createKeycloackUser(this.form.email.value,this.form.email.value,this.form.password.value,this.form.firstName.value,this.form.lastName.value,this.token).then(function(n){e.isSend=!0,e.status="success",e.message="Enregistrement effectu\xe9 avec succ\xe8s !",e.loading=!1,e.localRegistering()}).catch(function(n){e.isSend=!0,e.status="danger",e.message=n.error.error_description,e.loading=!1})]:(this.isSend=!0,this.status="danger",this.message="Les conditions d'utilisation doivent \xeatre valid\xe9es !",this.loading=!1,[2]):(this.isSend=!0,this.status="danger",this.message="Les dates ne sont pas bien renseign\xe9s !",this.loading=!1,[2]);case 1:return n.sent(),[2]}})})},e.prototype.localRegistering=function(){var e=this,n=new h.a;n.residenceUtilisateur=this.form.personResidence.value,n.nationaliteUtilisateur=this.form.personNationalite.value,n.numeroIdentiteUtilisateur=this.form.personNumeroIdentite.value,n.debutValiditeUtilisateur=this.form.personDebutValidite.value,n.finValiditeUtilisateur=this.form.personFinValidite.value,n.dateNaissanceUtilisateur=this.form.personDateNaissance.value,n.nomUtilisateur=this.form.lastName.value,n.prenomUtilisateur=this.form.firstName.value,n.loginUtilisateur=this.form.email.value,n.emailUtilisateur=this.form.email.value,n.telephone=this.form.telephone.value,n.typePiece=this.form.personPieceIdentite.value,this.userService.addUser(n,this.token).subscribe(function(n){e.router.navigate(["/auth/login",{registration:1}])},function(n){e.router.navigate(["/home"])})},e.prototype.getDataOfExistingPfm=function(){var e=this;this.loadingCheckExistingPersonFlag=!0,this.authService.getDataOfExistingPersonByNumeroAdhesion(this.personExistInputForm.value.numero_adhesion).subscribe(function(n){e.person=n.person,e.personFoundInBd=!0,e.personNotFoundInBd=!1,e.loadingCheckExistingPersonFlag=!1},function(n){e.loadingCheckExistingPersonFlag=!1,e.personFoundInBd=!1,e.personNotFoundInBd=!0})},e.prototype.onPersonFirstSubmit=function(){},e.prototype.onSaveUser=function(){var e=this;this.loadinPersongFlag=!0,this.errorFlag=!1;this.personFirstForm.value;this.profile.residenceUtilisateur=this.personSecondForm.value.personResidence,this.profile.nationaliteUtilisateur=this.personSecondForm.value.personNationalite,this.profile.numeroIdentiteUtilisateur=this.personSecondForm.value.personNumeroIdentite,this.profile.debutValiditeUtilisateur=this.personSecondForm.value.personDebutValidite,this.profile.finValiditeUtilisateur=this.personSecondForm.value.personFinValidite,this.profile.dateNaissanceUtilisateur=this.personSecondForm.value.personDateNaissance,this.userService.addUser(this.profile,this.token).subscribe(function(n){console.log("profile      :"+e.profile.finValiditeUtilisateur),console.log(n),alert("Inscription valid\xe9e"),e.isSignedUp=!0,e.isSignUpFailed=!1,e.loadinPersongFlag=!1,e.router.navigate(["/home"])},function(n){console.log(n),e.errorFlag=!0,e.loadinPersongFlag=!1,e.errorMessage=n.error.message,e.isSignUpFailed=!0})},e.prototype.onPersonSecondSubmit=function(){console.log("----- Soumission onPersonSecondSubmit ------")},e.prototype.onOrganisationFirstSubmit=function(){console.log("----- Soumission onOrganisationFirstSubmit ------")},e.prototype.onOrganisationSecondSubmit=function(){console.log("----- Soumission onOrganisationSecondSubmit ------")},e.prototype.onOrganisationThirdSubmit=function(){console.log("----- Soumission onOrganisationThirdSubmit ------")},e.prototype.setToken=function(e,n,t,i,o){if(n?(s.a.auth.authz.refreshToken=n,s.a.auth.authz.refreshTokenParsed=this.decodeToken(n)):(delete s.a.auth.authz.refreshToken,delete s.a.auth.authz.refreshTokenParsed),t?(s.a.auth.authz.idToken=t,s.a.auth.authz.idTokenParsed=this.decodeToken(t)):(delete s.a.auth.authz.idToken,delete s.a.auth.authz.idTokenParsed),e){if(s.a.auth.authz.token=e,s.a.auth.authz.tokenParsed=this.decodeToken(e),s.a.auth.authz.sessionId=i,s.a.auth.authz.authenticated=!0,s.a.auth.authz.subject=this.decodeToken(e).sub,s.a.auth.authz.realmAccess=this.decodeToken(e).realm_access,s.a.auth.authz.resourceAccess=this.decodeToken(e).resource_access,o&&(s.a.auth.authz.timeSkew=Math.floor(o/1e3)-this.decodeToken(e).iat),null!=s.a.auth.authz.timeSkew&&s.a.auth.authz.onTokenExpired){var a=1e3*(this.decodeToken(e).exp-(new Date).getTime()/1e3+s.a.auth.authz.timeSkew);console.log("[KEYCLOAK] Token expires in "+Math.round(a/1e3)+" s"),a<=0?s.a.auth.authz.timeSkew.onTokenExpired():s.a.auth.authz.timeSkew.tokenTimeoutHandle=setTimeout(s.a.auth.authz.timeSkew.onTokenExpired,a)}return s.a.auth.authz.timeSkew}return delete s.a.auth.authz.timeSkew.token,delete s.a.auth.authz.timeSkew.tokenParsed,delete s.a.auth.authz.timeSkew.subject,delete s.a.auth.authz.timeSkew.realmAccess,delete s.a.auth.authz.timeSkew.resourceAccess,s.a.auth.authz.timeSkew.authenticated=!1,s.a.auth.authz.timeSkew},e.prototype.decodeToken=function(e){switch((e=(e=(e=e.split(".")[1]).replace("/-/g","+")).replace("/_/g","/")).length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("Invalid token")}return e=(e=(e+"===").slice(0,e.length+e.length%4)).replace(/-/g,"+").replace(/_/g,"/"),e=decodeURIComponent(escape(atob(e))),e=JSON.parse(e)},e.prototype.isManager=function(){return s.a.hasAnyRole(["manager"])},e.prototype.isAdmin=function(){return s.a.hasAnyRole(["admin"])},e.prototype.isLogged=function(){return s.a.isLogged()},e.prototype.logout=function(){s.a.logout()},e.prototype.formatDate=function(e){return new Date(e).toLocaleString()},e.ctorParameters=function(){return[{type:o.R},{type:r.c},{type:v.a},{type:c.b},{type:g.a},{type:p.a},{type:x},{type:u.a}]},e=i.c([Object(o.n)({selector:"app-register",template:t("X8zA"),styles:[t("lR2Y")]}),i.f("design:paramtypes",[o.R,r.c,v.a,c.b,g.a,p.a,x,u.a])],e)}(),F=[{path:"",component:l,children:[{path:"login",component:m},{path:"register",component:k}]},{path:"pfm",loadChildren:"../pfm/pfm.module#PfmModule"}],C=function(){function e(){}return e=i.c([Object(o.M)({imports:[r.e.forChild(F)],exports:[r.e]})],e)}(),I=t("Xk95"),w=function(){function e(){}return e.prototype.ngOnInit=function(){},e=i.c([Object(o.n)({selector:"app-dialog-to-check-pfm",template:t("vJXV"),styles:[t("iN+3")]}),i.f("design:paramtypes",[])],e)}();t.d(n,"AuthentificationModule",function(){return N});var N=function(){function e(){}return e=i.c([Object(o.M)({declarations:[l,m,k,w],imports:[a.b,c.h,c.d,I.w,I.k,I.t,I.j,I.M,I.h,C,a.b,c.d,a.b,r.e,I.w,I.G,a.b,I.k,I.K,I.f,I.x,I.z,I.M,I.g,I.t,I.l,I.C,I.F,I.n.forRoot(),I.B,I.m,I.o.forRoot(),I.V.forChild(),I.E,I.U,I.j,I.h,I.J],providers:[I.H,v.a],entryComponents:[w]})],e)}()},"2Ql/":function(e,n){e.exports="nb-card-body {\n  padding-top: 5em;\n  padding-bottom: 5em; }\n\nh4 {\n  padding-bottom: 1.5em; }\n\ninput {\n  margin-bottom: 1em; }\n\na {\n  text-decoration: none; }\n"},Qx6u:function(e,n){e.exports='<nb-layout>\n  <nb-layout-header>\n      <img src="../../assets/images/logomicrocap_1.png" width="100" height="50" alt="" class="logo">\n    <h1><a [routerLink]="[\'../vitrine\']"><i class="nb-arrow-left" ></i> <i class="nb-home"></i> </a></h1>     \n  </nb-layout-header>\n\n  <nb-layout-column>\n\n    <router-outlet></router-outlet>\n    \n\n  </nb-layout-column>\n  \n</nb-layout>'},T8iF:function(e,n){e.exports='<div class="row justify-content-md-center">\n  \n  <div class="col-md-5">\n    <nb-card>\n      <nb-card-body>\n\n        <div class="text-center">\n          <h4> Connexion sur Microcap </h4>\n          <i class="fa fa-user-circle fa-5x" aria-hidden="true"></i>\n        </div>\n\n        <br><br>\n        <div class="row justify-content-md-center">\n          <div class="col-md-9">\n            <form class="login" name="form" [formGroup]="loginForm" (ngSubmit)="onLogin()">\n              <nb-alert class="bottom col-md-12" status="{{ status }}" *ngIf="isSend" fullWidth closable (close)="onClose()">\n                {{ message }}\n              </nb-alert>\n              <div class="input-group">\n                <input type="text" formControlName="login" name="username" nbInput fullWidth placeholder="Login"\n                  required>\n              </div>\n              <div class="input-group">\n                <input type="password" formControlName="password" name="password" nbInput fullWidth placeholder="Mot de passe"\n                  required>\n              </div>\n\n              <nb-checkbox id="rememberMeBox" name="rememberMe"> Remember me\n              </nb-checkbox>\n              <br><br>\n              <button nbButton fullWidth status="success" [disabled]="loading" [nbSpinner]="loadingFlag" nbSpinnerStatus="success" nbSpinnerSize="large" nbSpinnerMessage="">\n                Se connecter\n                <img *ngIf="loading" src="assets/images/loader.gif" width="20px;" class="text-center" style="text-align: center;">\n              </button>\n            </form>\n          </div>\n        </div>\n        <br>\n        <div class="row justify-content-md-center">\n          <div class="col-md-8" style="padding: 0px;">\n            <span style="float: left;"></span>\n            <span><a [routerLink]="[\'/auth/login\']"> Mot de passe oubli\xe9 ? </a></span>\n            <hr>\n            <p style="clear: both;" class="text-center">\n              Vous n\'avez pas encore de compte ? <br><a [routerLink]="[\'/auth/register\']">Cr\xe9ez un compte Microcap</a>\n            </p>\n          </div>\n        </div>\n      </nb-card-body>\n    </nb-card>\n  </div>\n \n</div>\n'},X8zA:function(e,n){e.exports='<div class="row justify-content-md-center">\n  <div class="col-md-7">\n\n    <nb-card>\n      <nb-card-body>\n        <nb-tabset fullWidth>\n          <nb-tab tabTitle="Personne physique">\n            <form [formGroup]="registerForm" (ngSubmit)="onRegister()" class="step-container">\n              <div class="row justify-content-md-center">\n                <div class="col-md-10">\n                    <nb-alert status="success" class="text-center">\n                      <h1 style="color: #fff; font-weight: bold;"><i class="nb-person"></i></h1>\n                      <strong>Inscrivez-vous en tant que personne physique en deux petites \xe9tapes !</strong>\n                    </nb-alert>\n\n                    <nb-alert class="bottom col-md-12" status="{{ status }}" *ngIf="isSend || isClicked" fullWidth closable (close)="onClose()">\n                      {{ message }}\n                    </nb-alert>\n                    <nb-card>\n                      <nb-card-body>\n                          <nb-stepper #stepper>\n                            <nb-step  label="">\n                                <div class="input-group">\n                                  <label>Nom </label>\n                                  <input type="text" name="lastName" nbInput fullWidth placeholder="Nom" formControlName="lastName" required>\n                                </div>\n                                <div class="input-group">\n                                  <label>Pr\xe9nom </label>\n                                  <input type="text" name="firstName" nbInput fullWidth placeholder="Pr\xe9nom" formControlName="firstName" required>\n                                </div>\n\n                                <div class="input-group">\n                                  <label>Email </label>\n                                  <input type="email" name="email" nbInput fullWidth placeholder="Adresse mail" formControlName="email" required>\n                                </div>\n\n                                <div class="input-group">\n                                  <label>T\xe9l\xe9phone </label>\n                                  <div class="control">\n                                    <select class="form-control" outline status="success" size="large" style="width: 100%" (change)="setCallingCode($event)">\n                                      <option></option>\n                                      <option *ngFor="let country of countries" [value]="country.callingCodes[0]" >{{ country.name }}</option>\n                                    </select>\n                                  </div>\n                                  <div class="input-group">\n                                    <input type="text" status="{{ statusPhoneNumber }}" (keyup)="checkPhoneNumber($event)" value="{{ telephoneTmp }}" name="telephone" nbInput fullWidth placeholder="Num\xe9ro t\xe9l\xe9phonique" formControlName="telephone" required>\n                                  </div>\n                                  </div>\n\n                                <div class="input-group">\n                                  <label>Mot de passe </label>\n                                  <input type="password" formControlName="password" name="password" nbInput fullWidth placeholder="Mot de passe"\n                                    required>\n                                </div>\n                                <div class="input-group">\n                                  <label>Confirmation </label>\n                                  <input type="password" (change)="nextStepper(); canStep()" formControlName="passwordConfirm" name="passwordConfirm" nbInput fullWidth placeholder="Confirmation"\n                                    required>\n                                </div>\n\n                              <button nbButton status="success"  [disabled]="!canStep()" (click)="nextStepper()" nbStepperNext >suivant</button>\n                            </nb-step>\n                            <nb-step *ngIf="canStep()" [stepControl]="personSecondForm" label="">\n                              \n                                <div class="input-group">\n                                  <label>Pays de r\xe9sidence </label>\n                                  \x3c!--<input type="text" name="personResidence" nbInput fullWidth placeholder="R\xe9sidence" formControlName="personResidence"> --\x3e\n                                  <div class="control">\n                                    <select class="form-control" formControlName="personResidence" fullWidth outline status="success" size="large" style="width: 100%">\n                                        <option></option>\n                                        <option *ngFor="let country of countries" [value]="country.name" >{{ country.name }}</option>\n                                    </select>\n                                  </div>\n                                </div>\n                                <div class="input-group">\n                                  <label>Nationalit\xe9 </label>\n                                  \x3c!-- <input type="text" name="personNationalite" nbInput fullWidth placeholder="Nationalit\xe9" formControlName="personNationalite"> --\x3e\n                                  <div class="control">\n                                      <select class="form-control" formControlName="personNationalite" fullWidth outline status="success" size="large" style="width: 100%">\n                                          <option></option>\n                                          <option *ngFor="let country of countries" [value]="country.name" >{{ country.name }}</option>\n                                      </select>\n                                    </div>\n                                </div>\n\n                                <div class="input-group">\n                                  <select name="personPieceIdentite" outline status="success" formControlName="personPieceIdentite">\n                                    <option value="" disabled selected hidden>Type de la pi\xe8ce d\'identit\xe9</option>\n                                    <option *ngFor="let typePiece of typePieceIdentites" [value]="typePiece.codeValue">{{typePiece.codeValue}}</option>\n                                  </select>\n                                </div>\n\n                                <div class="input-group">\n                                  <label>Num\xe9ro d\'identit\xe9 </label>\n                                  <input type="text" name="personNumeroIdentite" nbInput fullWidth placeholder="Num\xe9ro d\'identit\xe9" formControlName="personNumeroIdentite">\n                                </div>\n\n                                <div class="input-group">\n                                  <label>D\xe9but de validit\xe9</label>\n                                  <input type="date" name="personDebutValidite" nbInput fullWidth placeholder="D\xe9but de la validit\xe9" formControlName="personDebutValidite">\n                                </div>\n\n                                <div class="input-group">\n                                  <label>Fin de validit\xe9</label>\n                                  <input type="date" name="personFinValidite" nbInput fullWidth placeholder="Fin de validit\xe9 de la pi\xe8ce d\'identit\xe9" formControlName="personFinValidite">\n                                </div>\n\n                                <div class="input-group">\n                                  <label>Date de naissance</label>\n                                  <input type="date" name="personDateNaissance" nbInput fullWidth placeholder="Date de naissance" formControlName="personDateNaissance">\n                                </div>\n\n                                <nb-checkbox id="personAcceptContract" name="personAcceptContract" formControlName="personAcceptContract"\n                                  required> J\'accepte le contrat d\'adh\xe9sion \xe0 la plateforme Microcap\n                                </nb-checkbox><br><br>\n\n                                <button nbButton outline status="success" nbStepperPrevious>pr\xe9d\xe9dent</button>\n                                <button nbButton status="success" type="submit" [disabled]="loading">\n                                  Valider\n                                  <img *ngIf="loading" src="assets/images/loader.gif" width="20px;" class="text-center" style="text-align: center;">\n                                </button>\n                            </nb-step>\n                          </nb-stepper>\n                      </nb-card-body>\n                    </nb-card>\n                    <hr>\n                    <p style="clear: both;" class="text-center">\n                      Vous avez d\xe9j\xe0 un compte ? <br><a [routerLink]="[\'/auth/login\']">Connectez-vous</a>\n                    </p>\n                </div>\n              </div>\n            </form>\n          </nb-tab>\n\n          \x3c!-- <nb-tab tabTitle="Personne morale">\n            <div class="row justify-content-md-center">\n              <div class="col-md-10">\n                <form #formPageTwo="ngForm">\n                  <nb-alert status="success" class="text-center">\n                    <h1 style="color: #fff; font-weight: bold;"><i class="nb-home"></i></h1>\n                    <strong>Inscrivez-vous en tant que personne morale en trois petites \xe9tapes !</strong>\n                  </nb-alert>\n                  <nb-card>\n                    <nb-card-body>\n                      <nb-stepper #stepper>\n                        <nb-step [stepControl]="organisationFirstForm" label="">\n                          <form [formGroup]="organisationFirstForm" (ngSubmit)="onOrganisationFirstSubmit()" class="step-container">\n                            <h6>Etape 1: Information g\xe9n\xe9rale de la personne morale</h6>\n                            <hr>\n                            <p class="lorem">\n                              <i>Les champs marqu\xe9s <span class="text-danger">*</span> sont obligatoires.</i>\n                            </p>\n                            <div class="input-group">\n                              <label>Raison sociale <span class="text-danger"> *</span></label>\n                              <input type="text" name="raisonSociale" nbInput fullWidth placeholder="Raison sociale" formControlName="raisonSociale">\n                            </div>\n                            <div class="input-group">\n                              <label>Nom commercial <span class="text-danger"> *</span></label>\n                              <input type="text" name="nomCommercial" nbInput fullWidth placeholder="Nom commercial" formControlName="nomCommercial">\n                            </div>\n                            <div class="input-group">\n                              <select name="typeOrganisation" outline status="success" formControlName="typeOrganisation">\n                                <option value="" disabled selected hidden>Type de l\'organisation *</option>\n                                <option *ngFor="let typeOrganisation of typeOrganisations" [value]="typeOrganisation.codeValue">{{typeOrganisation.codeValue}}</option>\n                              </select>\n                            </div>\n                            <button nbButton status="success" nbStepperNext [disabled]="organisationFirstForm.invalid">suivant</button>\n                          </form>\n                        </nb-step>\n                        <nb-step [stepControl]="personExistForm.value[\'personExist\']? personExistInputForm: organisationSecondForm"\n                          label="">\n                          <form [formGroup]="personExistForm" class="step-container">\n                            <h6>Etape 2: Configuration du compte administrateur</h6>\n                            <hr>\n                            <nb-alert *ngIf="personNotFoundInBd && personExistForm.value[\'personExist\']" status="warning">Ce num\xe9ro d\'adh\xe9sion ne correspond \xe0 aucun utilisateur sur Microcap. Veuillez sp\xe9cifier un autre ou cr\xe9ez un administrateur.</nb-alert>\n                            \n                              <nb-checkbox status="success" formControlName="personExist">L\'administrateur est-il d\xe9j\xe0 inscrit sur Microcap ? </nb-checkbox> \n                          </form>\n                          <br>\n                          <form [formGroup]="personExistInputForm" class="step-container" *ngIf="personExistForm.value[\'personExist\']">\n                            <label>Si oui entrez son num\xe9ro d\'adh\xe9sion <span class="text-danger"> *</span></label>\n                            <br>\n                            <input type="text" nbInput fullWidth placeholder="Num\xe9ro d\'adh\xe9sion" formControlName="numero_adhesion">\n                            <br>\n                            <nb-alert *ngIf="personFoundInBd" outline="success">\n                                Membre retrouv\xe9 sur Microcap avec succ\xe8s ! <br>\n                              <table>\n                                <tr>\n                                  <td>Nom</td>\n                                  <td><strong>: {{person.firstName}}</strong></td>\n                                </tr>\n                                <tr>\n                                  <td>Pr\xe9nom</td>\n                                  <td><strong>: {{person.lastName}}</strong></td>\n                                </tr>\n                                <tr>\n                                    <td>Adresse mail</td>\n                                    <td><strong>: {{person.email}}</strong></td>\n                                  </tr>\n                              </table>\n                            </nb-alert>\n                            <button nbButton outline status="success" nbStepperPrevious>pr\xe9d\xe9dent</button>\n                            <button nbButton *ngIf="!personFoundInBd" status="success" [disabled]="personExistInputForm.invalid" (click)="getDataOfExistingPfm()" [nbSpinner]="loadingCheckExistingPersonFlag"\n                            nbSpinnerStatus="success" nbSpinnerSize="large" nbSpinnerMessage="" >Verifier</button>\n                            <button nbButton *ngIf="personFoundInBd" status="success" nbStepperNext [disabled]="personExistInputForm.invalid">suivant</button>\n                          </form>\n                          <form [formGroup]="organisationSecondForm" (ngSubmit)="onOrganisationSecondSubmit()" class="step-container"\n                            *ngIf="!personExistForm.value[\'personExist\']">\n                            <h6>Etape 2: Entrez les informations de l\'administrateur</h6>\n                            <p class="lorem">\n                              <i>Les champs marqu\xe9s <span class="text-danger">*</span> sont obligatoires.</i>\n                            </p>\n                            <div class="input-group">\n                              <label>Email <span class="text-danger"> *</span></label>\n                              <input type="email" name="organisationEmail" nbInput fullWidth placeholder="Adresse mail"\n                                formControlName="organisationEmail">\n                            </div>\n                            <div class="input-group">\n                              <label>Nom d\'utilisateur <span class="text-danger"> *</span></label>\n                              <input type="text" name="organisationUsername" nbInput fullWidth placeholder="Login"\n                                formControlName="organisationUsername">\n                            </div>\n                            <div class="input-group">\n                              <label>Mot de passe <span class="text-danger"> *</span></label>\n                              <input type="password" name="organisationPassword" nbInput fullWidth placeholder="Mot de passe"\n                                formControlName="organisationPassword">\n                            </div>\n                            <div class="input-group">\n                              <label>Confirmer le mot de passe <span class="text-danger"> *</span></label>\n                              <input type="password" name="organisationPasswordConfirm" nbInput fullWidth placeholder="Mot de passe"\n                                formControlName="organisationPasswordConfirm">\n                            </div>\n                            <button nbButton status="success" nbStepperNext>suivant</button>\n                          </form>\n                        </nb-step>\n                        <nb-step [stepControl]="organisationThirdForm" label="">\n                          <form [formGroup]="organisationThirdForm" (ngSubmit)="onOrganisationThirdSubmit()" class="step-container">\n                              <h6>Etape 3: Informations compl\xe9mentaires de la personne morale</h6>\n                              <hr>\n                            <div class="input-group">\n                              <label>Implantation </label>\n                              <input type="text" name="implantation" nbInput fullWidth placeholder="Implantation"\n                                formControlName="implantation">\n                            </div>\n                            <div class="input-group">\n                              <label>Pays d\'immatriculation </label>\n                              <input type="text" name="paysImmatriculation" nbInput fullWidth placeholder="Pays d\'immatriculation"\n                                formControlName="paysImmatriculation">\n                            </div>\n                            <div class="input-group">\n                              <select name="immatriculation" outline status="success" formControlName="immatriculation">\n                                <option value="" disabled selected hidden>Type d\'immatriculation</option>\n                                <option *ngFor="let immatriculation of typeImmatriculations" [value]="immatriculation.codeValue">{{immatriculation.codeValue}}</option>\n                              </select>\n                            </div>\n                            <div class="input-group">\n                              <label>Num\xe9ro d\'immatriculation <span class="text-danger"> *</span></label>\n                              <input type="text" name="numeroImmatriculation" nbInput fullWidth placeholder="Num\xe9ro d\'immatriculation"\n                                formControlName="numeroImmatriculation">\n                            </div>\n                            <div class="input-group">\n                              <label>D\xe9but d\'immatriculation</label>\n                              <input type="date" name="dateImmatriculation" nbInput fullWidth placeholder="Date d\'immatriculation"\n                                formControlName="dateImmatriculation">\n                            </div>\n                            <nb-checkbox id="organisationAcceptContract" name="organisationAcceptContract"\n                              formControlName="organisationAcceptContract" required> J\'accepte le contrat d\'adh\xe9sion \xe0\n                              la plateforme Microcap\n                            </nb-checkbox> <br><br>\n                            <button nbButton outline status="success" nbStepperPrevious>pr\xe9d\xe9dent</button>\n                            <button nbButton status="success" nbStepperNext (click)="personFoundInBd? enrollOrganisationWithExistantPfm() : enrollOrganisation()" [disabled]="organisationThirdForm.invalid"\n                              [nbSpinner]="loadinOrganisationgFlag" nbSpinnerStatus="success" nbSpinnerSize="large"\n                              nbSpinnerMessage="">Valider</button>\n                          </form>\n                        </nb-step>\n                      </nb-stepper>\n                    </nb-card-body>\n                  </nb-card>\n                  <hr>\n                  <p style="clear: both;" class="text-center">\n                    Vous avez d\xe9j\xe0 un compte ? <br><a [routerLink]="[\'/auth/login\']">Connectez-vous</a>\n                  </p>\n                </form>\n              </div>\n            </div>\n          </nb-tab> --\x3e\n        </nb-tabset>\n      </nb-card-body>\n    </nb-card>\n\n  </div>\n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\x3c!-- <div class="row justify-content-md-center">\n  \n  <div class="col-md-5">\n    <nb-card>\n      <nb-card-body>\n        <div class="text-center">\n          <h4> Enregistrez-vous sur Microcap </h4>\n          <i class="fa fa-user-circle fa-5x" aria-hidden="true"></i>\n        </div>\n        <br><br>\n        <div class="row justify-content-md-center">\n          <div class="col-md-9">\n            <form class="login" name="form" [formGroup]="registerForm" (ngSubmit)="onRegister()">\n              <nb-alert class="bottom col-md-12" status="{{ status }}" *ngIf="isSend" fullWidth closable (close)="onClose()">\n                {{ message }}\n              </nb-alert>\n              <div class="input-group">\n                <input type="text" formControlName="lastName" name="lastName" nbInput fullWidth placeholder="Noms"\n                  required>\n              </div>\n              <div class="input-group">\n                <input type="text" formControlName="firstName" name="firstName" nbInput fullWidth placeholder="Prenoms"\n                  required>\n              </div>\n              <div class="input-group">\n                <input type="text" formControlName="login" name="login" nbInput fullWidth placeholder="Login"\n                  required>\n              </div>\n              <div class="input-group">\n                <input type="email" formControlName="email" name="email" nbInput fullWidth placeholder="Email"\n                  required>\n              </div>\n              <div class="input-group">\n                <input type="password" formControlName="password" name="password" nbInput fullWidth placeholder="Mot de passe"\n                  required>\n              </div>\n              <div class="input-group">\n                <input type="password" formControlName="passwordConfirm" name="passwordConfirm" nbInput fullWidth placeholder="Confirmation"\n                  required>\n              </div>\n              <br><br>\n              <button nbButton fullWidth status="success" [disabled]="loading" [nbSpinner]="loadingFlag" nbSpinnerStatus="success" nbSpinnerSize="large" nbSpinnerMessage="">\n                S\'Enregistrer\n                <img *ngIf="loading" src="assets/images/loader.gif" width="20px;" class="text-center" style="text-align: center;">\n              </button>\n            </form>\n          </div>\n        </div>\n        <br>\n        <div class="row justify-content-md-center">\n          <div class="col-md-8" style="padding: 0px;">\n            <span style="float: left;"></span>\n            <span><a [routerLink]="[\'/auth/login\']"> Mot de passe oubli\xe9 ? </a></span>\n            <hr>\n            <p style="clear: both;" class="text-center">\n              <br><a [routerLink]="[\'/auth/login\']">J\'ai deja un compte Microcap</a>\n            </p>\n          </div>\n        </div>\n      </nb-card-body>\n    </nb-card>\n  </div>\n \n</div> --\x3e'},"iN+3":function(e,n){e.exports=""},lR2Y:function(e,n){e.exports="input, select {\n  margin-bottom: 1em; }\n\n.bottom-1 {\n  margin-bottom: 1em; }\n\nbutton {\n  margin-right: 10px; }\n\na {\n  text-decoration: none; }\n\n:host nb-tab {\n  padding: 1.25rem; }\n\n.error {\n  color: red; }\n\n.form-control-danger {\n  border: 2px #ff0000 solid;\n  border-radius: 3px; }\n\n/* Select */\n\nselect {\n  width: 100%;\n  border: 2px #dadfe6 solid;\n  border-radius: 5px;\n  height: 45px;\n  background-color: transparent; }\n\nselect:invalid {\n  color: gray; }\n"},vJXV:function(e,n){e.exports='\n<nb-alert status="success">\n    Ce pfm existe\n  </nb-alert>\n'},yvBa:function(e,n){e.exports=".logo {\n  margin-right: 5em; }\n\na {\n  text-decoration: none; }\n"}}]);